!function(){"use strict";angular.module("app.core",["ngAnimate","ngSanitize","ngMessages","ui.router","models"])}(),function(){"use strict";function e(){function e(e,t,a){e.dateFrom=a.dateFrom,e.dateTo=a.dateTo}var a={bindToController:!0,controller:t,controllerAs:"schedule",link:e,restrict:"E",templateUrl:function(e,t){return"/app/schedule/schedule.html"},scope:{events:"=",dateFrom:"@",dateTo:"@"},replace:!0};return a}function t(e,t){function a(){t(r,1e3)}function n(e,t,a){return[{title:"Пятница 25",date:"Thu Mar 25 2016 00:00:00 GMT+0300 (MSK)",today:!0,events:[{title:"Встреча совета директоров",startDate:"Fri Mar 25 2016 10:25:00 GMT+0300 (MSK)",endDate:"Fri Mar 25 2016 12:35:00 GMT+0300 (MSK)",createdBy:3,top:"1066px",height:"111px",left:"0px",width:"100%"}]},{title:"Суббота 26",date:"Sat Mar 26 2016 00:00:00 GMT+0300 (MSK)",today:!1,events:[{title:"Поездка в Питер",startDate:"Sat Mar 26 2016 14:25:00 GMT+0300 (MSK)",endDate:"Sat Mar 26 2016 16:35:00 GMT+0300 (MSK)",createdBy:1,top:"877px",height:"150px",left:"0px",width:"50%"},{title:"Совещание правительства",startDate:"Sat Mar 26 2016 14:25:00 GMT+0300 (MSK)",endDate:"Sat Mar 26 2016 16:15:00 GMT+0300 (MSK)",createdBy:2,top:"977px",height:"249px",left:"50%",width:"50%"}]},{title:"Воскресенье 27",date:"Sun Mar 27 2016 00:00:00 GMT+0300 (MSK)",today:!1,events:[{title:"Совещание с советом диреторов компании",startDate:"Sun Mar 27 2016 17:25:00 GMT+0300 (MSK)",endDate:"Sun Mar 27 2016 22:00:00 GMT+0300 (MSK)",createdBy:2,top:"528px",height:"150px",left:"0px",width:"100%"},{title:"Встреча с молодыми предпрнимателями",startDate:"Sun Mar 27 2016 17:25:00 GMT+0300 (MSK)",endDate:"Sun Mar 27 2016 22:00:00 GMT+0300 (MSK)",createdBy:1,top:"1526px",height:"150px",left:"0px",width:"100%"}]}]}function r(){var e=document.querySelectorAll(".b-schedule__current-time")[0],t=document.querySelectorAll(".b-schedule")[0],a=document.querySelectorAll(".b-schedule__time-spacer")[0],n=parseInt(getComputedStyle(t).height),r=parseInt(getComputedStyle(a).height),i=(n-r)/1440,d=new Date,l=new Date(d.getFullYear(),d.getMonth(),d.getDate(),0,0,0),s=(d-l)/1e3/60,c=d.timeNow();e.textContent=c,e.style.top=parseInt(parseInt(s)*i)+r+"px"}function i(){return["00:00","00:30","01:00","01:30","02:00","02:30","03:00","03:30","04:00","04:30","05:00","05:30","06:00","06:30","07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30"]}var d=this;return d.dateFrom&&d.dateTo?(d.days=n(d.dateFrom,d.dateTo,d.events),d.times=i(),d.setCurrentTime=r,void a()):(e.error("dateFrom and dateTo on schedule directive are obligatory!"),!1)}angular.module("app.core").directive("schedule",e),e.$inject=[],t.$inject=["$log","$interval"]}(),function(){"use strict";angular.module("models",[])}(),function(){"use strict";function e(e){this.events=e}angular.module("models").service("models",e),e.$inject=["events"]}(),function(){"use strict";function e(e,t){function a(){var a=e.defer(),r={data:{events:[{title:"Поездка в Питер",startDate:"Sat Mar 26 2016 14:25:00 GMT+0300 (MSK)",endDate:"Sat Mar 26 2016 16:35:00 GMT+0300 (MSK)",createdBy:1},{title:"Совещание правительства",startDate:"Sat Mar 26 2016 14:25:00 GMT+0300 (MSK)",endDate:"Sat Mar 26 2016 16:15:00 GMT+0300 (MSK)",createdBy:2},{title:"Встреча совета директоров",startDate:"Fri Mar 25 2016 10:25:00 GMT+0300 (MSK)",endDate:"Fri Mar 25 2016 12:35:00 GMT+0300 (MSK)",createdBy:3},{title:"Встреча с молодыми предпрнимателями",startDate:"Sun Mar 27 2016 17:25:00 GMT+0300 (MSK)",endDate:"Sun Mar 27 2016 22:00:00 GMT+0300 (MSK)",createdBy:1}]}};return t(function(){n.eventsList=r.data,a.resolve(n.eventsList)},500),a.promise}this.getList=a;var n={}}angular.module("models").service("events",e),e.$inject=["$q","$timeout"]}(),function(){"use strict";angular.module("app",["app.core","app.calendar"])}(),function(){"use strict";function e(e,t){t.state("calendar",{url:"/calendar",templateUrl:"app/calendar/calendar.html",controller:"CalendarController",controllerAs:"calendar"})}angular.module("app").config(e),e.$inject=["$urlRouterProvider","$stateProvider"]}(),function(){"use strict";angular.module("app.calendar",["app"])}(),function(){"use strict";function e(e,t,a,n){function r(){i({callback:d})}function i(e){l.eventsLoading=!0,n.events.getList().then(function(t){e&&e.callback&&e.callback.call(l,t)},function(e){a.error("getEventsList error: ",e)})}function d(e){a.info("Events: ",e),l.events=e,l.eventsLoading=!1}var l=this;l.date="Март 2016",l.eventsLoading=!0,l.events=[],r()}angular.module("app.calendar").controller("CalendarController",e),e.$inject=["$scope","$rootScope","$log","models"]}(),function(){"use strict";Date.prototype.timeNow=function(){return(this.getHours()<10?"0":"")+this.getHours()+":"+(this.getMinutes()<10?"0":"")+this.getMinutes()}}(),function(){"use strict";function e(e){e.otherwise("/calendar")}angular.module("app").config(e),e.$inject=["$urlRouterProvider"]}(),function(){"use strict";angular.module("app").constant("CONFIG",e);var e={API_ROOT:"http://demo9752422.mockable.io/"}}(),angular.module("app").run(["$templateCache",function(e){e.put("app/calendar/calendar.html",'<div class="l-view__cnt"><div class="l-header ui-clearfix"><div class="l-header__left"><div class="l-header__block"><div class="b-calendar-heading"><h2 class="ui-h1" ng-bind="calendar.date"></h2></div></div><div class="l-header__block"><div class="b-calendar-filter"></div></div></div><div class="l-header__right"><div class="l-header__block"></div><div class="l-header__block"></div></div></div><div class="l-content" ng-class="{\'loading\': calendar.eventsLoading, \'loading-events\': calendar.eventsLoading}"><schedule date-from="Fri Mar 25 2016 00:00:00 GMT+0300 (MSK)" date-to="Sun Mar 27 2016 00:00:00 GMT+0300 (MSK)" events="calendar.events"></schedule></div></div>'),e.put("app/schedule/schedule.html",'<div class="b-schedule"><div class="b-schedule__times"><div class="b-schedule__time-spacer"></div><div class="b-schedule__time" ng-class="$index === 0 ? \'first-time\' : \'\'" ng-repeat="time in schedule.times" ng-bind="$index === 0 ? \'\' : time"></div></div><div class="b-schedule__day" ng-repeat="day in schedule.days"><div class="b-schedule__day-title" ng-class="{\'today\': day.today}" ng-bind="day.title"></div><div class="b-schedule__daytime" ng-repeat="time in schedule.times"></div><div class="b-event" ng-repeat="event in day.events" ng-bind="event.title" ng-class="\'color-\' + event.createdBy" style="top: {{event.top}}; height: {{event.height}}; left: {{event.left}}; width: {{event.width}}"></div></div><div class="b-schedule__current-time"></div></div>')}]);
//# sourceMappingURL=../maps/scripts/app-168d94ba0f.js.map
